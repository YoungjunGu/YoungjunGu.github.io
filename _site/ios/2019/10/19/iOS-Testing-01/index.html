<!DOCTYPE html>
<html lang="en"><!--
 __  __                __                                     __
/\ \/\ \              /\ \             __                    /\ \
\ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
  \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
   \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
    \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
                /\___/                \ \____/
                \/__/                  \/___/

Powered by Hydejack v6.4.0 (https://qwtel.com/hydejack/)
-->









<head>
  <!-- =============== -->
<!-- META            -->
<!-- =============== -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="format-detection" content="telephone=no" />
<meta http-equiv="x-ua-compatible" content="ie=edge" />
<meta
  name="naver-site-verification"
  content="22c5b4ef3bfda7fc6100671413989219de7a4ac8"
/>
<meta property="og:title" content="iOS Testing - UnitTest편" />
<meta property="og:type" content="article" />

<!-- =============== -->
<!-- Google AdSense  -->
<!-- =============== -->
<script
  data-ad-client="ca-pub-8247516864622650"
  async
  src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
></script>

 
<meta property="og:image" content="http://localhost:4000/assets/img/logo.png" />


<meta property="og:image:width" content="640" />
<meta property="og:image:height" content="360" />
 
<title>iOS Testing - UnitTest편 &middot; Gaki</title>
 
<meta
  name="description"
  content="iOS Unit &amp; UI 테스트

"
/>
<meta
  property="og:description"
  content="iOS Unit &amp; UI 테스트

"
/>



<!-- =============== -->
<!-- LINKS           -->
<!-- =============== -->
<link rel="canonical" href="http://localhost:4000/ios/2019/10/19/iOS-Testing-01/" />
<meta property="og:url" content="http://localhost:4000/ios/2019/10/19/iOS-Testing-01/" />

<link
  rel="alternate"
  type="application/atom+xml"
  title="Gaki Feed"
  href="http://localhost:4000/feed.xml"
/>


<link rel="prev" href="http://localhost:4000/swift/2019/10/17/Swift-RxSwift-03/" />
 
<link rel="next" href="http://localhost:4000/ios/2019/10/21/iOS-Basic-14/" />


<link
  rel="apple-touch-icon"
  href="http://localhost:4000/apple-touch-icon.png"
/>
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?" />
<!-- Place favicon.ico in the root directory -->

<!-- =============== -->
<!-- SCRIPTS         -->
<!-- =============== -->
<script>
  !function(n,e){function t(n,e){n.onload=function(){this.onerror=this.onload=null,e(null,n)},n.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),n)}}function o(n,e){n.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,e(null,n))}}n._loaded=!1,n.loadJSDeferred=function(a,d){function r(){n._loaded=!0;var r=e.createElement("script");r.src=a,d&&(("onload"in r?t:o)(r,d),r.onload||t(r,d));var l=e.getElementsByTagName("script")[0];l.parentNode.insertBefore(r,l)}n._loaded?r():n.addEventListener?n.addEventListener("load",r,!1):n.attachEvent?n.attachEvent("onload",r):n.onload=r}}(window,document);

  !function(e){"use strict";var n=function(n,t,o){function i(e){if(a.body)return e();setTimeout(function(){i(e)})}function r(){l.addEventListener&&l.removeEventListener("load",r),l.media=o||"all"}var d,a=e.document,l=a.createElement("link");if(t)d=t;else{var f=(a.body||a.getElementsByTagName("head")[0]).childNodes;d=f[f.length-1]}var s=a.styleSheets;l.rel="stylesheet",l.href=n,l.media="only x",i(function(){d.parentNode.insertBefore(l,t?d:d.nextSibling)});var u=function(e){for(var n=l.href,t=s.length;t--;)if(s[t].href===n)return e();setTimeout(function(){u(e)})};return l.addEventListener&&l.addEventListener("load",r),l.onloadcssdefined=u,u(r),l};"undefined"!=typeof exports?exports.loadCSS=n:e.loadCSS=n}("undefined"!=typeof global?global:this);

  !function(t){if(t.loadCSS){var e=loadCSS.relpreload={};if(e.support=function(){try{return t.document.createElement("link").relList.supports("preload")}catch(t){return!1}},e.poly=function(){for(var e=t.document.getElementsByTagName("link"),r=0;r<e.length;r++){var n=e[r];"preload"===n.rel&&"style"===n.getAttribute("as")&&(t.loadCSS(n.href,n,n.getAttribute("media")),n.rel=null)}},!e.support()){e.poly();var r=t.setInterval(e.poly,300);t.addEventListener&&t.addEventListener("load",function(){e.poly(),t.clearInterval(r)}),t.attachEvent&&t.attachEvent("onload",function(){t.clearInterval(r)})}}}(this);

  window.disablePushState = false;
  window.disableDrawer = false;
</script>

<!--[if lt IE 9]>
  <script src="https://unpkg.com/html5shiv/dist/html5shiv.min.js"></script>
<![endif]-->

<!-- =============== -->
<!-- STYLES          -->
<!-- =============== -->
<!--[if gt IE 8]><!---->
<style>
  
  article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}*{box-sizing:border-box}html,body{margin:0;padding:0}html{font-size:16px;line-height:1.75}body{color:#333;background-color:#fff;overflow-y:scroll}a{text-decoration:none}.lead{margin-left:-1rem;margin-right:-1rem}img,.img{display:block;max-width:100%;margin-bottom:1rem;border:none}img.lead,.img.lead{max-width:calc(100% + 2rem);width:calc(100% + 2rem)}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6,.heading{font-weight:bold;text-rendering:optimizeLegibility}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6{margin:1.6rem 0 1rem;line-height:1.6}h1,.h1{font-size:2rem;line-height:1.25}h2,.h2{font-size:1.5rem}h3,.h3{font-size:1.17em}p{margin-top:0;margin-bottom:1rem}p.lead{font-size:1.25rem;font-weight:300;padding:0 1rem}ul,ol,dl{margin-top:0;margin-bottom:1rem}ul,ol{padding-left:1.25rem}hr{position:relative;margin:1.5rem 0;border:0;border-top:1px solid #eee}.hr{padding-bottom:.5rem;border-bottom:1px solid #eee;margin-bottom:1.5rem}h4,h5,h6,.h4,.h5,.h6{margin-bottom:0.5rem;font-size:1rem}table{margin-bottom:1rem;width:100%;width:calc(100% + 2rem);margin-left:-1rem;border:1px solid #e5e5e5;border-collapse:collapse;border-spacing:0}td,th{padding:.25rem .5rem;border:1px solid #e5e5e5}td:first-child,th:first-child{padding-left:1rem}td:last-child,th:last-child{padding-right:1rem}thead+tbody,tbody+tbody,tfoot{border-top:3px double #e5e5e5}tbody tr:nth-child(odd) td,tbody tr:nth-child(odd) th{background-color:#f9f9f9}footer{margin-bottom:2rem}.page,.post{margin-bottom:3em}.page li+li,.post li+li{margin-top:.25rem}.page>header,.post>header{margin-bottom:2rem}.page-title,.post-title{margin-top:0}.post-date{display:block;margin-top:-0.5rem;margin-bottom:1rem;color:#9a9a9a}.related-posts{padding-left:0;list-style:none}.related-posts>li,.related-posts>li+li{margin-top:1rem}.related-posts>li>small,.related-posts>li+li>small{font-size:75%;color:#9a9a9a}.message{margin-bottom:1rem;padding:1rem;color:#787878;background-color:#f9f9f9;margin-left:-1rem;margin-right:-1rem}body,main{position:relative;overflow-x:hidden}@media screen{body::before{content:'';background:#e5e5e5;position:absolute;left:0;top:0;bottom:0}}@media screen and (min-width: 40em){html{font-size:17px}}@media screen and (min-width: 54em){html{font-size:16px}}@media screen and (min-width: 88em){html{font-size:17px}}@media screen and (min-width: 125em){html{font-size:18px}}.sr-only{display:none}.clearfix,.sidebar-social::after,.clearafter::after{content:"";display:table;clear:both}a,.a{position:relative;padding-bottom:.15rem;border-style:hidden}.img{overflow:hidden;background-color:#f9f9f9}.img>img{margin:0;width:100%;height:100%}.sixteen-nine{position:relative}.sixteen-nine::before{display:block;content:"";width:100%;padding-top:56.25%}.sixteen-nine>*{position:absolute;top:0;left:0;right:0;bottom:0}h1+hr,h2+hr,h3+hr,h4+hr,h5+hr,h6+hr{margin-top:0}.fade-in{animation-duration:500ms;animation-name:fade-in;animation-fill-mode:forwards}@keyframes fade-in{from{transform:translateY(-2rem);opacity:0}50%{transform:translateY(-2rem);opacity:0}to{transform:translateY(0);opacity:1}}.mb6{margin-bottom:10rem}.sidebar{color:rgba(255,255,255,0.75);text-align:left}.sidebar::before{content:"";position:absolute;z-index:2;top:0;left:0;bottom:0;right:0;background:linear-gradient(to bottom, rgba(32,32,32,0) 0%, rgba(32,32,32,0.5) 100%)}.sidebar a{color:#fff;border-bottom-color:rgba(255,255,255,0.2)}.right-side{width:100%;margin-left:auto;margin-right:auto}.right-side .ad-first{text-align:center}@media screen{.right-side{max-width:38rem;min-height:100vh}.right-side .ad-second{display:none}}@media screen and (min-width: 54em){.right-side{margin-left:20rem;margin-right:1rem;padding:4rem 1rem 12rem}.right-side .ad-second{text-align:center;display:block}}@media screen and (min-width: 72em){.right-side{margin-left:22rem;max-width:42rem}}@media screen and (min-width: 88em){.right-side{width:162px;margin-left:0rem;margin-right:0rem;padding:0rem;margin-top:10rem;display:block;float:left}}@media screen and (min-width: 96em){.right-side{width:300px;margin-right:0rem}}#_yDrawer{position:relative}@media screen{#_yDrawer{min-height:640px;min-height:100vh}}@media screen and (min-width: 54em){#_yDrawer{width:18rem;margin-left:0}}.sidebar-bg{position:absolute;height:100%;overflow:hidden;top:0;right:0;bottom:0;left:0;background:#202020 center / cover}.sidebar-box{display:flex;justify-content:center}.sidebar-sticky{position:relative;z-index:3}@media screen{.sidebar-sticky{-ms-overflow-style:none;overflow:-moz-scrollbars-none;height:100%;overflow:auto;position:absolute;padding:3rem 0rem;right:2.5rem;left:2.5rem}}.sidebar-sticky::-webkit-scrollbar{display:none}.sidebar-about>h1{color:#fff;font-size:2rem}.sidebar-nav>ul{list-style:none;padding-left:0;margin-bottom:.5rem}a.sidebar-nav-item{width:100%;font-weight:normal;display:block;line-height:1.75;padding:.25rem 0;border-bottom:1px solid rgba(255,255,255,0.2)}a.sidebar-nav-subitem{font-weight:normal;display:block;line-height:1.75;padding:.25rem 0;border-bottom:1px solid rgba(255,255,255,0.2)}@media screen{.y-drawer-scrim{z-index:2}.y-drawer-content{width:18rem;left:-18rem;z-index:3}}.sidebar-social{margin-bottom:.5rem}.sidebar-social>ul{list-style:none;padding-left:0;margin:0 -.25rem}.sidebar-social>ul>li{float:left}.sidebar-social>ul>li>a{display:inline-block;text-align:center;font-size:1.6rem;line-height:3rem;width:3.1249rem;height:4rem;padding:.5rem 0}.sidebar-social>ul li+li{margin-top:0}.fixed-top{position:fixed;top:0;left:0;width:100%;z-index:1}.navbar>.content{padding-top:0;padding-bottom:0;min-height:0;height:0}.menu{display:inline-block;padding:1.75rem 1.5rem;border-bottom:none;margin-left:-1.5rem;color:#9a9a9a !important}.menu::after{content:"\2630"}@media screen and (min-width: 54em){.menu{padding:1.25rem 1.5rem;position:absolute;left:-9999px}.menu:focus{position:static}}.animation-main{pointer-events:none}.loading{display:none}@media print{.menu{display:none}}.animation-main{opacity:0;will-change:opacity}.loading{position:absolute;top:0;right:0;padding:5.25rem 4.5rem;transform-origin:top right;transform:scale(0.33)}.content{position:relative;margin-left:auto;margin-right:auto;padding:5rem 1rem 12rem}@media screen{.content{min-height:100vh}}@media screen and (min-width: 54em){.content{padding:4rem 1rem 12rem;margin-left:19rem;margin-right:3rem}}@media screen and (min-width: 72em){.content{max-width:42rem;margin-left:21rem}}@media screen and (min-width: 88em){.content{float:left;width:100%;margin-left:22rem;margin-right:5rem}}@media screen and (min-width: 96em){.content{max-width:44rem}}@media screen and (min-width: 102em){.content{margin-left:25rem;margin-right:8rem}}.me{width:6.5rem;height:6.5rem;align-self:center;margin-right:20px;border-radius:100%;position:relative}@media screen and (min-width: 40em){.me{width:7rem;height:7rem}}@media screen and (min-width: 54em){.me{width:6.5rem;height:6.5rem}}@media screen and (min-width: 72em){.me{width:7rem;height:7rem}}main>footer{width:100%;position:absolute;bottom:0;left:0;right:0;padding:0 1rem;color:#9a9a9a;font-size:smaller;text-align:center}main>footer>p{margin-bottom:0}html{font-family:'Sans-serif'}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6,.heading{font-family:'Sans-serif'}

</style>


<link
  rel="preload"
  href="http://localhost:4000/assets/css/hydejack.css?v=6.4.0"
  as="style"
  onload="this.rel='stylesheet'"
/>

<style id="_pageStyle">

.content a{color:#4f86aa;border-color:rgba(79,134,170,0.2)}.content a:hover{border-color:#4f86aa}:focus{outline-color:#4f86aa}::selection{color:#fff;background:#4f86aa}::-moz-selection{color:#fff;background:#4f86aa}

</style>


<noscript>
  <link rel="stylesheet" href="http://localhost:4000/assets/css/hydejack.css?v=6.4.0" />
    
  
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Lato"
  />
  <style>
    html { font-family: 'Lato', 'Sans-serif' }
    h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-family: 'Lato', 'Sans-serif' }
  </style>
   
  <link rel="stylesheet" href="http://localhost:4000/assets/icomoon/style.css" />
</noscript>
<!--<![endif]-->

</head>

<body>
  <!-- =============== -->
<!-- MENU            -->
<!-- =============== -->
<div class="navbar fixed-top">
  <div class="content">
    <span class="sr-only">Jump to:</span>
    <a id="_menu" class="menu no-hover" href="#_title">
      <span class="sr-only">Menu</span>
    </a>
  </div>
</div>

<!-- =============== -->
<!-- CONTENT         -->
<!-- =============== -->
<div id="_yPushState">
  <div class="fade-in">
    <main id="_main" class="content" role="main" data-color="#4f86aa" data-image="/assets/img/kumo.jpg">
      

<article id="post-ios/2019/10/19/iOS-Testing-01" class="post" role="article">
  <header>
    <h1 class="post-title">
      
        iOS Testing - UnitTest편
        
    </h1>

    <p class="post-date heading">
      <time datetime="2019-10-19T00:00:00+09:00">19 Oct 2019</time>
      









in <a href="/category/ios/" data-flip="title">iOS</a>

      









on <a href="/tag/ios-%ED%85%8C%EC%8A%A4%ED%8C%85/" data-flip="title">테스팅</a>

    </p>

    
  <div class="hr" style="padding-bottom:0"></div>


  </header>
  


  
  <div class="markdown-body">

    <!--  -->
    <style>
      .myAd1190 {
        width: 48%;
        height: 280px;
      }

      .myAd1290 {
        width: 48%;
        height: 280px;
      }

      @media(max-width: 800px) {
        .myAd1190 {
          display: none;
        }

        .myAd1290 {
          width: 98%;
        }
      }

      .row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        height: 300px;
      }

      .row-center {
        display: flex;
        justify-content: center;
        height: 258px;
      }
    </style>
   
    <!--<br />-->
    <h2 id="ios-unit--ui-테스트">iOS Unit &amp; UI 테스트</h2>

<p>인턴업무 중 Android UnitTest와 UI Test(단위 테스트)를 맡아 진행했습니다. Android 의 경우 Google 에서 제공하는 UIAutomator를 사용하여 테스트 스크립트를 직접 구현해서 테스트 했습니다. Test Orchestrator 등 강제종료에 대처하는 방법등을 연구하면서 업무를 했습니다. 과연 iOS 의 단위테스트와 UI 테스트는 어떻게 수행하는지 정리해보고 개인프로젝트 ARDust 에 적용해보도록 하겠습니다.</p>

<h2 id="시작하기-전에">시작하기 전에</h2>

<h3 id="first--테스트에-대한-모범사례-best-practices-for-testing">FIRST : 테스트에 대한 모범사례 (Best Practices for Testing)</h3>

<p>두문자어 <code class="highlighter-rouge">FIRST</code>는 단위 테스트를 위한 간결한 기준(criteria) 세트를 효과적으로 설명한다. 해당 기준은 다음과 같다.</p>

<ul>
  <li><code class="highlighter-rouge">Fast</code>(빠르게) : 테스트는 빨리 실행되야 한다. 그래서 사람들이 신경쓰지 않는다.</li>
  <li><code class="highlighter-rouge">Independent/Isolated</code>(독립적/분리된) : 테스트는 따로 설정이나 분리를 해서는 안된다.</li>
  <li><code class="highlighter-rouge">Repeatable</code>(반복가능한) : 테스트 수행할때마다 동일한 결과를 얻어야 한다. 외부의 데이터 공급자나 동시성(concurrency) 문제로 인해 일시적으로 오류가 발생 할수 있다.</li>
  <li><code class="highlighter-rouge">Self-validating</code>(자체 검증) : 테스트는 완전히 자동화 되어야 한다. 로그 파일에 대한 프로그래머의 해석보다는 패스(pass)또는 실패(fail)를 출력해야 한다.</li>
  <li><code class="highlighter-rouge">Timely</code>(적시에) : 이상적인 테스트는 테스트한 생산 코드를 작성하기 전에 작성해야 한다.</li>
</ul>

<p>출처 : https://kka7.tistory.com/68?category=975272</p>

<h3 id="unit-test-란">Unit Test 란?</h3>

<blockquote>
  <p>컴퓨터 프로그래밍에서 소스 코드의 특정 모듈이 의도된 대로 정확히 작동하는 지 <strong>검증하는 절차</strong></p>
</blockquote>

<p>즉, 모든 함수와 메소드에 대한 테스트케이스(Test Case)를 작성하는 절차를 말한다. 이를 통해서 언제라도 코드 변경으로 인해 문제가 발생할 경우 단시간 내에 이를 파악하고 바로 잡을 수 있도록 해준다.</p>

<p>이상적으로, 각 테스트 케이스는 서로 분리되어야 한다. 이를 <strong>가짜 객체(Mock Object)</strong> 를 생성하는 것도 좋은 방법이다.</p>

<p>사실 테스트 업무는 서비스 이전, 이후 에도 매우 중요하기 때문에 회사나 팀에서 SQE 검증 팀이 있어서 지속적으로 개발팀에 피드백을 해주는 구조이다. 하지만 개발자도 TDD(Test Driven Development) 등 개발중에 테스트를 주입하여 사전에 작은 문제를 발견하고 해결하기 위해 테스팅의 개념을 잘 알고 있어야한다.</p>

<h2 id="xcode의-test-사전준비">Xcode의 Test 사전준비</h2>

<p>프로젝트 생성시 Unit Test 와 Ui Test를 할 수 있게 프로젝트에서 영역이 구분 되어있다.</p>

<p><img width="270" alt="image" src="https://user-images.githubusercontent.com/33486820/67025699-6fa89c00-f141-11e9-9e3a-dfca94f0c0ad.png" /></p>

<h2 id="ios-unittest">iOS UnitTest</h2>

<p>기본적으로 내가 테스트 하고자 하는 프로젝트의 이름뒤에 Tests 가 붙여진 ARDustTests 파일이 생성이 된다. 그리고 ARDustTests.swift 파일을 보면 아래와 같이 4개의 메서드가 존재한다.</p>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">XCTest</span>
<span class="c1">// ARDust의 클래스와 메서드에 접근할 수 있게 해준다. </span>
<span class="kd">@testable</span> <span class="kd">import</span> <span class="kt">ARDust</span>

<span class="kd">class</span> <span class="kt">ARDustTests</span><span class="p">:</span> <span class="kt">XCTestCase</span> <span class="p">{</span>
		<span class="c1">// 1</span>
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">setUp</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">}</span>
		<span class="c1">// 2</span>
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">tearDown</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">}</span>
		<span class="c1">// 3</span>
    <span class="kd">func</span> <span class="nf">testExample</span><span class="p">()</span> <span class="p">{</span>   
    <span class="p">}</span>
		<span class="c1">// 4</span>
    <span class="kd">func</span> <span class="nf">testPerformanceExample</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">measure</span> <span class="p">{</span>       
        <span class="p">}</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">XCTest</code> 를 import 하고 있고 ARDustTests를 <code class="highlighter-rouge">XCTestCase</code> 의  하하위클래스로 정의하고 있으며 <code class="highlighter-rouge">setup()</code> , <code class="highlighter-rouge">tearDown()</code> 와 테스트 메서드를 정의한다.</p>

<h3 id="test-class-를-실행하는-3가지-방법">Test Class 를 실행하는 3가지 방법</h3>

<ol>
  <li><code class="highlighter-rouge">Product\Test</code> 또는 <code class="highlighter-rouge">command-U</code>, 작성한 전체 테스트케이스 클래스를 실행</li>
  <li>테스트 네비게이터에서 화살표 버튼을 클릭</li>
</ol>

<p><img width="269" alt="image" src="https://user-images.githubusercontent.com/33486820/67027892-5a357100-f145-11e9-85b5-e11e8d8c8b9b.png" /></p>

<ol>
  <li>gutter 에서 다이아몬드 버튼을 클릭하여 내가 수행하고 싶은 메서드영역을 테스트한다.</li>
</ol>

<p><img width="154" alt="image" src="https://user-images.githubusercontent.com/33486820/67028442-46d6d580-f146-11e9-98d9-87fae90a896d.png" /></p>

<p>위의 방법을 사용해서 테스트가 성공하면 테스트 영역에 녹색 체크표시가 나타나고 <code class="highlighter-rouge">testPerformanceExample()</code> 끝에 있는 회색 다이아몬드를 클릭하면 성능 결과를 연다.</p>

<p><img width="457" alt="image" src="https://user-images.githubusercontent.com/33486820/67028667-b1881100-f146-11e9-84ee-0a00235cb5d2.png" /></p>

<h2 id="xctassert를-사용하여-모델-테스트">XCTAssert를 사용하여 모델 테스트</h2>

<p>우선 ARDust 앱의 모델의 핵심 기능을 XCTAsset를 이용하여 테스트 한다. 간단하게 테스트 swift 파일을 생성해서 테스트 해보겠다.</p>

<p>아래와 같이 우선 유닛테스트가 ARDust의 클래스와 메서드에 접근할 수 있도록	 <code class="highlighter-rouge">@testable import </code> 를 해준다.</p>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="kd">@testable</span> <span class="kd">import</span> <span class="kt">ARDust</span>
</code></pre>
</div>

<p>그리고 테스트하고자 하는 클래스의 객체를 선언한다.</p>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="kd">class</span> <span class="kt">DustMeasure</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">time</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">var</span> <span class="nv">totalDust</span> <span class="o">=</span> <span class="mi">0</span>   <span class="c1">// 초기 미세먼지 양</span>
    <span class="k">var</span> <span class="nv">ultraDust</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1">// 초미세먼지 양</span>
    
    <span class="c1">// 측정 시작</span>
    <span class="kd">func</span> <span class="nf">startMeasure</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">time</span> <span class="o">=</span> <span class="mi">0</span>
      	<span class="n">totalDust</span> <span class="o">=</span> <span class="mi">50</span>
    <span class="p">}</span>
    <span class="c1">// dust 정보 가져온다 가정</span>
    <span class="kd">func</span> <span class="nf">addUltraDust</span><span class="p">(</span><span class="n">_</span> <span class="nv">dust</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">time</span> <span class="o">=</span> <span class="n">time</span> <span class="o">+</span> <span class="mi">1</span> <span class="c1">// 시간은 늘어나고</span>
        <span class="n">ultraDust</span> <span class="o">+=</span> <span class="n">dust</span> <span class="c1">// 기존의 초미세먼지에 추가적으로 더한다.</span>
        <span class="n">totalDust</span> <span class="o">+=</span> <span class="n">ultraDust</span> <span class="c1">// 초기미세먼지양에 초미세먼지의 양을 더한다.</span>
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">check</span><span class="p">(</span><span class="nv">guess</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int</span> <span class="p">{</span>
      	<span class="c1">// 추측값과 실제 값의 차이를 반환한다.</span>
        <span class="k">return</span> <span class="n">totalDust</span> <span class="o">-</span> <span class="n">guess</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>Test를 위해 위의 클래스를 추가했다.  간단하게 미세먼지를 측정하는 메서드도 추가했다.</p>

<p><code class="highlighter-rouge">addUltraDust</code> 메서드 에서 측정한 시간을 늘리고 기존의 초미세먼지(ultraDust)의 양에 매개변수로 입력 받은 값만큼 늘려주고 총미세먼지 양(totalDust) 의 값도 늘려준다.</p>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="kd">import</span> <span class="kt">XCTest</span>
<span class="kd">@testable</span> <span class="kd">import</span> <span class="kt">ARDust</span>

<span class="kd">class</span> <span class="kt">ARDustTests</span><span class="p">:</span> <span class="kt">XCTestCase</span> <span class="p">{</span>
    <span class="c1">// 1. SUT(System Under Test)</span>
    <span class="k">var</span> <span class="nv">dustUnderTest</span><span class="p">:</span> <span class="kt">DustMeasure</span><span class="o">!</span>
    <span class="c1">// 2.</span>
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">setUp</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">setUp</span><span class="p">()</span>
      	<span class="c1">// SUT 객체 생성과 동작하는 코드 기입</span>
        <span class="n">dustUnderTest</span> <span class="o">=</span> <span class="kt">DustMeasure</span><span class="p">()</span>
        <span class="n">dustUnderTest</span><span class="o">.</span><span class="nf">startMeasure</span><span class="p">()</span>
    		<span class="c1">// 초미세먼지 추가 + 30</span>
      	<span class="n">dustUnderTest</span><span class="o">.</span><span class="nf">addUltraDust</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="c1">// 3.</span>
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">tearDown</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">tearDown</span><span class="p">()</span>
       	<span class="c1">// SUT 객체 해제</span>
        <span class="n">dustUnderTest</span> <span class="o">=</span> <span class="kc">nil</span>
    <span class="p">}</span>
    <span class="c1">// 4.</span>
    <span class="kd">func</span> <span class="nf">testScoreIsComputed</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// given</span>
        <span class="k">let</span> <span class="nv">guess</span> <span class="o">=</span> <span class="n">dustUnderTest</span><span class="o">.</span><span class="n">totalDust</span> <span class="o">-</span> <span class="mi">10</span>	<span class="c1">// error를 발생시키기 위한 임의의 추측값</span>
        <span class="c1">// when</span>
        <span class="k">let</span> <span class="nv">difference</span> <span class="o">=</span> <span class="n">dustUnderTest</span><span class="o">.</span><span class="nf">check</span><span class="p">(</span><span class="nv">guess</span><span class="p">:</span> <span class="n">guess</span><span class="p">)</span>
        <span class="c1">// then</span>
        <span class="kt">XCTAssertEqual</span><span class="p">(</span><span class="n">difference</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">"차이가 0이 아니므로, 예측한 미세먼지 총량이 다릅니다."</span><span class="p">)</span>
        
    <span class="p">}</span>
    
    <span class="kd">func</span> <span class="nf">testPerformanceExample</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">measure</span> <span class="p">{</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
<span class="p">}</span>
</code></pre>
</div>

<p>그러면 Test 코드를 작성해보자.</p>

<ol>
  <li>
    <p>우선 아까 생성한 클래스를 클래스 수준에서 SUT(System Under Test) 객체를 선언 한다.</p>
  </li>
  <li>
    <p><strong>setUp</strong> : 이 메서안에서 선언한 SUT 객체를 생성한다. 이 메서드에서드는 이 테스트 클래스 에서 진행되는 모든 테스트케이스에서 공통으로 필요로 하는 행위들을 정의한다. 즉 클래스 안에 속하는 테스트 메서드들이 호출되기 전 항상 setUp 메서드가 호출된다.</p>
  </li>
  <li>
    <p><strong>tearDown</strong> : 이 메서드 안에서 생성한 SUT 객체를 해제한다. setUp 과 반대로 모든 테스트 케이스 메서드들이 종료된 후 호출되는 메서드로 setUp 에서 생성되고 테스트메서드에서 사용된 것들을 정리해주고 해제할 필요가 있을때 해당 내용들을 이 메서드 안에서 해주면 된다.</p>
  </li>
  <li>
    <p>테스트메서드의 경우 <strong>test</strong> 접두어를 붙인 메서드로 자동으로 test 접두어를 넣을 시 메서드가 testable 하게 된다. (gutter 에 다이아몬드 버튼 생성) 그리고 <strong>반드시 각 테스트 케이스는 하나의 메서드로 분리하여 작성해야한다</strong>. 테스트 메서드도 메서드로 하나의 기능만을 수행해야하기 때문에 하나의 테스트 메서드 안에 여러 케이스를 넣는 것은 올바른 방법이 아니다.</p>

    <p>그리고 테스트 메서드는 위의 <code class="highlighter-rouge">testScoreIsComputed</code> 처럼 하나의 형식을 따르는 것이 좋다.</p>
  </li>
</ol>

<h3 id="test메서드의-형식--given-when-then">test메서드의 형식 : given, when ,then</h3>

<p>테스트 메서드는 반드시 하나의 테스트케이스만 존재하게 분리하여 작성해야한다. 그렇기 때문에 이런 규칙 하에 특정한 형식을 따르는 것이 바람직 하다. 그 형식은 3단계 <strong>given, when, then</strong> 으로 나누어져있다.</p>

<ol>
  <li><strong>given</strong> : 필요한 모든 값을 설정한다. 예측할 guess 설정한다. totalDust 값을 guess 값으로 설정했다.</li>
  <li><strong>when</strong> : 테스트 중인 코드를 실행한다. <code class="highlighter-rouge">dustUnderTest.check(guess: guess)</code> 를 호출하여 값의 차이를 가져온다.</li>
  <li><strong>then</strong> : 예상한 결과를 확인한다.  만약 예측한 값(guess) 와 결과값 (totalDust) 가 다르다면 <code class="highlighter-rouge">check</code> 함수에서 두 값의 차이를 반환하는데 같지 않으므로 차이가 0 이 반환되지 않고 결국 실패 할 것이다. 만약 아래 -10 을 뺀다면 정상적으로 테스트는 종료될 것이다.</li>
</ol>

<p><img width="1145" alt="image" src="https://user-images.githubusercontent.com/33486820/67146884-9514e180-f2ca-11e9-92bd-68e057660b73.png" /></p>

<p>오늘은 iOS의 Unit Test를 Xcode에서 어떻게 수행하는지에 대해서 공부해 보았습니다. 우선 iOS에서도 Android JUnit/UI Automator 와 마찬가지로 UnitTest를 할 수 있게  <a href="https://developer.apple.com/documentation/xctest">XCTest</a> 라이브러리를 제공하고 있습니다. 테스팅에 대한 간단한 방법등을 익혔는데  앞으로는 보다 효율적이고 좋은 테스팅은 어떤 것인지에 대해서 찾아보고 몇개의 시리즈로 나누어서 실제 현업에서는 어떻게 TDD를 통해 테스트와 개발을 병행하는지에 대해서 기록하도록 하겠습니다</p>

<hr />

<h2 id="reference">Reference</h2>

<ul>
  <li><a href="https://kka7.tistory.com/68?category=975272">iOS Unit Test Tutorial</a></li>
  <li><a href="https://developer.apple.com/documentation/xctest">Apple Developer - XCTest</a></li>
</ul>


    <br />
    <br />
  </div>
  

</article>

<!--<hr class="dingbat" />-->
<!--
<div class="share">
  <h2>Share this post</h2>
  <div class="share-body">
    <a href="http://twitter.com/share?text=iOS Testing - UnitTest편&amp;url=http://localhost:4000/ios/2019/10/19/iOS-Testing-01/"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <span class="icon-twitter">
      </span>
    </a>
    <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/ios/2019/10/19/iOS-Testing-01/"
      onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <span class="icon-facebook">
      </span>
    </a>
  </div>
</div>
-->
<br />






  <aside class="author" role="complementary">
    <div class="author">
  <h2 class="page-title hr">
    About
  </h2>
<div class="author-body">
  
    
  

  

  <img
    src="/assets/img/me.jpg"
    class="me"
    alt="youngjun gu"
    srcset="/assets/img/me.jpg 1x,/assets/img/me.jpg 2x"
    
  />


  
  <div class="author-body-description">
    <p>오늘을 기록하고 내일을 코딩하는 개발자</p>

  </div>
</div>
</div>

  </aside>




<aside class="related" role="complementary">
  <h2 class="hr">Related Posts</h2>

  <ul class="related-posts">
    
      
      
      
        
        
          


<li class="h4">
  <a href="/ios/2020/06/29/iOS-Basic-xib%EC%82%AC%EC%9A%A9%EB%B2%95/" data-flip="title">
    <span>xib를 통해 CustomView 만들기 & xib와 nib의 차이</span>
  </a>
  <small><time datetime="2020-06-29T00:00:00+09:00">
    29 Jun 2020
  </time></small>
</li>

        
      
        
        
          


<li class="h4">
  <a href="/ios/2020/06/29/iOS-Basic-maskToBounds&clipsToBounds/" data-flip="title">
    <span>masksToBounds 와 clipsToBounds의 차이점</span>
  </a>
  <small><time datetime="2020-06-29T00:00:00+09:00">
    29 Jun 2020
  </time></small>
</li>

        
      
        
        
          


<li class="h4">
  <a href="/ios/2020/05/28/iOS-Basic-15/" data-flip="title">
    <span>SwiftGen</span>
  </a>
  <small><time datetime="2020-05-28T00:00:00+09:00">
    28 May 2020
  </time></small>
</li>

        
      
        
        
      
    
  </ul>
</aside>


      
        <aside class="comments" role="complementary">
  <h2>Comments</h2>
  <hr/>

  <div id="disqus_thread"></div>

  <script>
    !function(s,i){function e(e){var t=s.pageYOffset||i.body.scrollTop;s.DISQUS&&!s._disqusThis&&!s._disqusFirst&&t+s.innerHeight>=s._disqusThreadOffsetTop&&(s._disqusThis=!0,s.DISQUS.reset({reload:!0,config:d}))}var d=function(){this.page.title="iOS Testing - UnitTest편",this.page.identifier="/ios/2019/10/19/iOS-Testing-01",this.page.url="http://localhost:4000/ios/2019/10/19/iOS-Testing-01/"};s._disqusFirst=void 0===s._disqusFirst||s._disqusFirst,s._disqusLoading=void 0!==s._disqusLoading&&s._disqusLoading,s._disqusThis=!1,s._disqusThreadOffsetTop=i.getElementById("disqus_thread").offsetTop,s._disqusLoading?s._disqusFirst=!1:(s._disqusLoading=!0,loadJSDeferred("//gaki.disqus.com/embed.js"),s.addEventListener?s.addEventListener("scroll",e,{passive:!0}):s.attachEvent?s.attachEvent("onscroll",e):s.onscroll=e)}(window,document);

  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</aside>

      

      <footer>
  <hr/>
  
    <p>© 2020. by Gaki</p>

  
  <p>
    <code>Powered by <a href="https://gaki2745.github.io/">gaki</a></code>
  </p>
</footer>

    </main>
    <div class="right-side">
  <br />
  <br />
</div>

  </div>
  <div id="_yDrawer">
  <div id="_sidebar" class="sidebar">
    <div class="sidebar-bg" style="background-color:#4f86aa;background-image:url(/assets/img/kumo.jpg)"></div>
    <header class="sidebar-sticky" role="banner">
      <br/>
      <div class="sidebar-about">
        <h1><a id="_title" href="/">Gaki</a></h1>
        <p>오늘을 기록하고 내일을 코딩하는 iOS 개발자</p>

      </div>

      <br/>
      <br/>
      <nav class="sidebar-nav heading" role="navigation">
        <span class="sr-only">Navigation:</span>
<ul>
  

  

  
  
  
  
  
    <li>
      <input type="checkbox" id="list-item-1"/>
      <div  class="list-wrapper">
      <a class="sidebar-nav-item" href="/category/ios/">iOS</a>
       <label class="folder" for="list-item-1">▾</label>
    </div>
     <ul class="list-body">
       
           
         
           
         
           
         
           
         
           
         
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/ios-basic/">Basic</a>
             </li>
           
         
           
         
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/ios-%EB%94%94%EC%9E%90%EC%9D%B8%ED%8C%A8%ED%84%B4/">디자인패턴</a>
             </li>
           
         
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/ios-%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90%ED%8C%A8%ED%84%B4/">아키텍쳐패턴</a>
             </li>
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/ios-%ED%85%8C%EC%8A%A4%ED%8C%85/">테스팅</a>
             </li>
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/ios-ui%EB%94%94%EC%9E%90%EC%9D%B8/">UI디자인</a>
             </li>
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/ios-arkit/">ARKit</a>
             </li>
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/ios-avfoundation/">AVFoundation</a>
             </li>
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/ios-pop/">POP</a>
             </li>
           
         
     </ul>
    </li>

  
  
    <li>
      <input type="checkbox" id="list-item-2"/>
      <div  class="list-wrapper">
      <a class="sidebar-nav-item" href="/category/swift/">Swift</a>
       <label class="folder" for="list-item-2">▾</label>
    </div>
     <ul class="list-body">
       
           
         
           
         
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/swift-basic/">Basic</a>
             </li>
           
         
           
         
           
         
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/swift-rxswift/">RxSwift</a>
             </li>
           
         
           
         
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/swift-oop/">OOP</a>
             </li>
           
         
           
         
           
         
           
         
           
         
           
         
           
         
     </ul>
    </li>

  
  
    <li>
      <input type="checkbox" id="list-item-3"/>
      <div  class="list-wrapper">
      <a class="sidebar-nav-item" href="/category/algorithm/">Algorithm</a>
       <label class="folder" for="list-item-3">▾</label>
    </div>
     <ul class="list-body">
       
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/algorithm-problem/">문제풀이</a>
             </li>
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/algorithm-swiftalgorithm/">SwiftAlgorithm</a>
             </li>
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
     </ul>
    </li>

  
  
    <li>
      <input type="checkbox" id="list-item-4"/>
      <div  class="list-wrapper">
      <a class="sidebar-nav-item" href="/category/swiftui/">SwiftUI</a>
       <label class="folder" for="list-item-4">▾</label>
    </div>
     <ul class="list-body">
       
           
         
           
         
           
         
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/swiftui-combine/">Combine</a>
             </li>
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
     </ul>
    </li>

  
  
    <li>
      <input type="checkbox" id="list-item-5"/>
      <div  class="list-wrapper">
      <a class="sidebar-nav-item" href="/category/wwdc/">WWDC</a>
       <label class="folder" for="list-item-5">▾</label>
    </div>
     <ul class="list-body">
       
           
         
           
         
           
         
           
         
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/wwdc-2019/">2019</a>
             </li>
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
     </ul>
    </li>

  
  
    <li>
      <input type="checkbox" id="list-item-6"/>
      <div  class="list-wrapper">
      <a class="sidebar-nav-item" href="/category/life/">Life</a>
       <label class="folder" for="list-item-6">▾</label>
    </div>
     <ul class="list-body">
       
           
         
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/life-review/">후기</a>
             </li>
           
         
           
         
           
         
           
         
           
         
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/life-retrospect/">회고</a>
             </li>
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
     </ul>
    </li>

  
  
    <li>
      <input type="checkbox" id="list-item-7"/>
      <div  class="list-wrapper">
      <a class="sidebar-nav-item" href="/about/">About</a>
       
    </div>
     <ul class="list-body">
       
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
     </ul>
    </li>

  
</ul>

      </nav>
    <br/>
    <br/>
      <div class="sidebar-box">
        
          
  

  

  <img
    src="/assets/img/me.jpg"
    class="me"
    alt="youngjun gu"
    srcset="/assets/img/me.jpg 1x,/assets/img/me.jpg 2x"
    
  />


        
      </div>
      <p>Be Faithful to the Basic!!</p>

      
      
        <div class="sidebar-social">
          <span class="sr-only">Social:</span>
<ul>
  
    









<li>
  <a href="https://facebook.com/yeongjun.gu">
    <span class="icon-facebook" title="Facebook"></span>
    <span class="sr-only">Facebook</span>
  </a>
</li>

  
    









<li>
  <a href="https://github.com/gaki2745">
    <span class="icon-github" title="GitHub"></span>
    <span class="sr-only">GitHub</span>
  </a>
</li>

  
    









<li>
  <a href="mailto:guyeongjun@naver.com">
    <span class="icon-mail" title="Email"></span>
    <span class="sr-only">Email</span>
  </a>
</li>

  
    









<li>
  <a href="https://gaki2745.github.io/feed.xml">
    <span class="icon-rss2" title="RSS"></span>
    <span class="sr-only">RSS</span>
  </a>
</li>

  
</ul>

        </div>
      
    </header>
  </div>
</div>
</div>

<!-- =============== -->
<!-- SCRIPTS         -->
<!-- =============== -->

<script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-92346434-1', 'auto');
  ga('send', 'pageview');
  loadJSDeferred('https://www.google-analytics.com/analytics.js');
</script>





<!--[if gt IE 8]><!---->
<script src="//ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
<script>
  WebFont.load({
    
    google: {
      families: 'Lato'.split('|')
    },
    

    custom: {
      families: ['icomoon'],
      urls: ['/assets/icomoon/style.css']
    }
  });
</script>
<!--<![endif]-->


  <!--[if gt IE 9]><!---->
  
  <script>loadJSDeferred('/assets/js/hydejack.js?v=6.4.0');</script>

  
  <!--<![endif]-->



</body>

</html>
