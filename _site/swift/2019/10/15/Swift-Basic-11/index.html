<!DOCTYPE html>
<html lang="en"><!--
 __  __                __                                     __
/\ \/\ \              /\ \             __                    /\ \
\ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
  \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
   \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
    \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
                /\___/                \ \____/
                \/__/                  \/___/

Powered by Hydejack v6.4.0 (https://qwtel.com/hydejack/)
-->









<head>
  <!-- =============== -->
<!-- META            -->
<!-- =============== -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="format-detection" content="telephone=no" />
<meta http-equiv="x-ua-compatible" content="ie=edge" />
<meta
  name="naver-site-verification"
  content="22c5b4ef3bfda7fc6100671413989219de7a4ac8"
/>
<meta property="og:title" content="Swift Hashable Protocol" />
<meta property="og:type" content="article" />

<!-- =============== -->
<!-- Google AdSense  -->
<!-- =============== -->
<script
  data-ad-client="ca-pub-8247516864622650"
  async
  src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"
></script>

 
<meta property="og:image" content="http://localhost:4000/assets/img/logo.png" />


<meta property="og:image:width" content="640" />
<meta property="og:image:height" content="360" />
 
<title>Swift Hashable Protocol &middot; Gaki</title>
 
<meta
  name="description"
  content="Hashable은 프로토콜이다.

"
/>
<meta
  property="og:description"
  content="Hashable은 프로토콜이다.

"
/>



<!-- =============== -->
<!-- LINKS           -->
<!-- =============== -->
<link rel="canonical" href="http://localhost:4000/swift/2019/10/15/Swift-Basic-11/" />
<meta property="og:url" content="http://localhost:4000/swift/2019/10/15/Swift-Basic-11/" />

<link
  rel="alternate"
  type="application/atom+xml"
  title="Gaki Feed"
  href="http://localhost:4000/feed.xml"
/>


<link rel="prev" href="http://localhost:4000/swift/2019/10/15/Swift-Basic-10/" />
 
<link rel="next" href="http://localhost:4000/swift/2019/10/17/Swift-RxSwift-03/" />


<link
  rel="apple-touch-icon"
  href="http://localhost:4000/apple-touch-icon.png"
/>
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?" />
<!-- Place favicon.ico in the root directory -->

<!-- =============== -->
<!-- SCRIPTS         -->
<!-- =============== -->
<script>
  !function(n,e){function t(n,e){n.onload=function(){this.onerror=this.onload=null,e(null,n)},n.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),n)}}function o(n,e){n.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,e(null,n))}}n._loaded=!1,n.loadJSDeferred=function(a,d){function r(){n._loaded=!0;var r=e.createElement("script");r.src=a,d&&(("onload"in r?t:o)(r,d),r.onload||t(r,d));var l=e.getElementsByTagName("script")[0];l.parentNode.insertBefore(r,l)}n._loaded?r():n.addEventListener?n.addEventListener("load",r,!1):n.attachEvent?n.attachEvent("onload",r):n.onload=r}}(window,document);

  !function(e){"use strict";var n=function(n,t,o){function i(e){if(a.body)return e();setTimeout(function(){i(e)})}function r(){l.addEventListener&&l.removeEventListener("load",r),l.media=o||"all"}var d,a=e.document,l=a.createElement("link");if(t)d=t;else{var f=(a.body||a.getElementsByTagName("head")[0]).childNodes;d=f[f.length-1]}var s=a.styleSheets;l.rel="stylesheet",l.href=n,l.media="only x",i(function(){d.parentNode.insertBefore(l,t?d:d.nextSibling)});var u=function(e){for(var n=l.href,t=s.length;t--;)if(s[t].href===n)return e();setTimeout(function(){u(e)})};return l.addEventListener&&l.addEventListener("load",r),l.onloadcssdefined=u,u(r),l};"undefined"!=typeof exports?exports.loadCSS=n:e.loadCSS=n}("undefined"!=typeof global?global:this);

  !function(t){if(t.loadCSS){var e=loadCSS.relpreload={};if(e.support=function(){try{return t.document.createElement("link").relList.supports("preload")}catch(t){return!1}},e.poly=function(){for(var e=t.document.getElementsByTagName("link"),r=0;r<e.length;r++){var n=e[r];"preload"===n.rel&&"style"===n.getAttribute("as")&&(t.loadCSS(n.href,n,n.getAttribute("media")),n.rel=null)}},!e.support()){e.poly();var r=t.setInterval(e.poly,300);t.addEventListener&&t.addEventListener("load",function(){e.poly(),t.clearInterval(r)}),t.attachEvent&&t.attachEvent("onload",function(){t.clearInterval(r)})}}}(this);

  window.disablePushState = false;
  window.disableDrawer = false;
</script>

<!--[if lt IE 9]>
  <script src="https://unpkg.com/html5shiv/dist/html5shiv.min.js"></script>
<![endif]-->

<!-- =============== -->
<!-- STYLES          -->
<!-- =============== -->
<!--[if gt IE 8]><!---->
<style>
  
  article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}*{box-sizing:border-box}html,body{margin:0;padding:0}html{font-size:16px;line-height:1.75}body{color:#333;background-color:#fff;overflow-y:scroll}a{text-decoration:none}.lead{margin-left:-1rem;margin-right:-1rem}img,.img{display:block;max-width:100%;margin-bottom:1rem;border:none}img.lead,.img.lead{max-width:calc(100% + 2rem);width:calc(100% + 2rem)}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6,.heading{font-weight:bold;text-rendering:optimizeLegibility}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6{margin:1.6rem 0 1rem;line-height:1.6}h1,.h1{font-size:2rem;line-height:1.25}h2,.h2{font-size:1.5rem}h3,.h3{font-size:1.17em}p{margin-top:0;margin-bottom:1rem}p.lead{font-size:1.25rem;font-weight:300;padding:0 1rem}ul,ol,dl{margin-top:0;margin-bottom:1rem}ul,ol{padding-left:1.25rem}hr{position:relative;margin:1.5rem 0;border:0;border-top:1px solid #eee}.hr{padding-bottom:.5rem;border-bottom:1px solid #eee;margin-bottom:1.5rem}h4,h5,h6,.h4,.h5,.h6{margin-bottom:0.5rem;font-size:1rem}table{margin-bottom:1rem;width:100%;width:calc(100% + 2rem);margin-left:-1rem;border:1px solid #e5e5e5;border-collapse:collapse;border-spacing:0}td,th{padding:.25rem .5rem;border:1px solid #e5e5e5}td:first-child,th:first-child{padding-left:1rem}td:last-child,th:last-child{padding-right:1rem}thead+tbody,tbody+tbody,tfoot{border-top:3px double #e5e5e5}tbody tr:nth-child(odd) td,tbody tr:nth-child(odd) th{background-color:#f9f9f9}footer{margin-bottom:2rem}.page,.post{margin-bottom:3em}.page li+li,.post li+li{margin-top:.25rem}.page>header,.post>header{margin-bottom:2rem}.page-title,.post-title{margin-top:0}.post-date{display:block;margin-top:-0.5rem;margin-bottom:1rem;color:#9a9a9a}.related-posts{padding-left:0;list-style:none}.related-posts>li,.related-posts>li+li{margin-top:1rem}.related-posts>li>small,.related-posts>li+li>small{font-size:75%;color:#9a9a9a}.message{margin-bottom:1rem;padding:1rem;color:#787878;background-color:#f9f9f9;margin-left:-1rem;margin-right:-1rem}body,main{position:relative;overflow-x:hidden}@media screen{body::before{content:'';background:#e5e5e5;position:absolute;left:0;top:0;bottom:0}}@media screen and (min-width: 40em){html{font-size:17px}}@media screen and (min-width: 54em){html{font-size:16px}}@media screen and (min-width: 88em){html{font-size:17px}}@media screen and (min-width: 125em){html{font-size:18px}}.sr-only{display:none}.clearfix,.sidebar-social::after,.clearafter::after{content:"";display:table;clear:both}a,.a{position:relative;padding-bottom:.15rem;border-style:hidden}.img{overflow:hidden;background-color:#f9f9f9}.img>img{margin:0;width:100%;height:100%}.sixteen-nine{position:relative}.sixteen-nine::before{display:block;content:"";width:100%;padding-top:56.25%}.sixteen-nine>*{position:absolute;top:0;left:0;right:0;bottom:0}h1+hr,h2+hr,h3+hr,h4+hr,h5+hr,h6+hr{margin-top:0}.fade-in{animation-duration:500ms;animation-name:fade-in;animation-fill-mode:forwards}@keyframes fade-in{from{transform:translateY(-2rem);opacity:0}50%{transform:translateY(-2rem);opacity:0}to{transform:translateY(0);opacity:1}}.mb6{margin-bottom:10rem}.sidebar{color:rgba(255,255,255,0.75);text-align:left}.sidebar::before{content:"";position:absolute;z-index:2;top:0;left:0;bottom:0;right:0;background:linear-gradient(to bottom, rgba(32,32,32,0) 0%, rgba(32,32,32,0.5) 100%)}.sidebar a{color:#fff;border-bottom-color:rgba(255,255,255,0.2)}.right-side{width:100%;margin-left:auto;margin-right:auto}.right-side .ad-first{text-align:center}@media screen{.right-side{max-width:38rem;min-height:100vh}.right-side .ad-second{display:none}}@media screen and (min-width: 54em){.right-side{margin-left:20rem;margin-right:1rem;padding:4rem 1rem 12rem}.right-side .ad-second{text-align:center;display:block}}@media screen and (min-width: 72em){.right-side{margin-left:22rem;max-width:42rem}}@media screen and (min-width: 88em){.right-side{width:162px;margin-left:0rem;margin-right:0rem;padding:0rem;margin-top:10rem;display:block;float:left}}@media screen and (min-width: 96em){.right-side{width:300px;margin-right:0rem}}#_yDrawer{position:relative}@media screen{#_yDrawer{min-height:640px;min-height:100vh}}@media screen and (min-width: 54em){#_yDrawer{width:18rem;margin-left:0}}.sidebar-bg{position:absolute;height:100%;overflow:hidden;top:0;right:0;bottom:0;left:0;background:#202020 center / cover}.sidebar-box{display:flex;justify-content:center}.sidebar-sticky{position:relative;z-index:3}@media screen{.sidebar-sticky{-ms-overflow-style:none;overflow:-moz-scrollbars-none;height:100%;overflow:auto;position:absolute;padding:3rem 0rem;right:2.5rem;left:2.5rem}}.sidebar-sticky::-webkit-scrollbar{display:none}.sidebar-about>h1{color:#fff;font-size:2rem}.sidebar-nav>ul{list-style:none;padding-left:0;margin-bottom:.5rem}a.sidebar-nav-item{width:100%;font-weight:normal;display:block;line-height:1.75;padding:.25rem 0;border-bottom:1px solid rgba(255,255,255,0.2)}a.sidebar-nav-subitem{font-weight:normal;display:block;line-height:1.75;padding:.25rem 0;border-bottom:1px solid rgba(255,255,255,0.2)}@media screen{.y-drawer-scrim{z-index:2}.y-drawer-content{width:18rem;left:-18rem;z-index:3}}.sidebar-social{margin-bottom:.5rem}.sidebar-social>ul{list-style:none;padding-left:0;margin:0 -.25rem}.sidebar-social>ul>li{float:left}.sidebar-social>ul>li>a{display:inline-block;text-align:center;font-size:1.6rem;line-height:3rem;width:3.1249rem;height:4rem;padding:.5rem 0}.sidebar-social>ul li+li{margin-top:0}.fixed-top{position:fixed;top:0;left:0;width:100%;z-index:1}.navbar>.content{padding-top:0;padding-bottom:0;min-height:0;height:0}.menu{display:inline-block;padding:1.75rem 1.5rem;border-bottom:none;margin-left:-1.5rem;color:#9a9a9a !important}.menu::after{content:"\2630"}@media screen and (min-width: 54em){.menu{padding:1.25rem 1.5rem;position:absolute;left:-9999px}.menu:focus{position:static}}.animation-main{pointer-events:none}.loading{display:none}@media print{.menu{display:none}}.animation-main{opacity:0;will-change:opacity}.loading{position:absolute;top:0;right:0;padding:5.25rem 4.5rem;transform-origin:top right;transform:scale(0.33)}.content{position:relative;margin-left:auto;margin-right:auto;padding:5rem 1rem 12rem}@media screen{.content{min-height:100vh}}@media screen and (min-width: 54em){.content{padding:4rem 1rem 12rem;margin-left:19rem;margin-right:3rem}}@media screen and (min-width: 72em){.content{max-width:42rem;margin-left:21rem}}@media screen and (min-width: 88em){.content{float:left;width:100%;margin-left:22rem;margin-right:5rem}}@media screen and (min-width: 96em){.content{max-width:44rem}}@media screen and (min-width: 102em){.content{margin-left:25rem;margin-right:8rem}}.me{width:6.5rem;height:6.5rem;align-self:center;margin-right:20px;border-radius:100%;position:relative}@media screen and (min-width: 40em){.me{width:7rem;height:7rem}}@media screen and (min-width: 54em){.me{width:6.5rem;height:6.5rem}}@media screen and (min-width: 72em){.me{width:7rem;height:7rem}}main>footer{width:100%;position:absolute;bottom:0;left:0;right:0;padding:0 1rem;color:#9a9a9a;font-size:smaller;text-align:center}main>footer>p{margin-bottom:0}html{font-family:'Sans-serif'}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6,.heading{font-family:'Sans-serif'}

</style>


<link
  rel="preload"
  href="http://localhost:4000/assets/css/hydejack.css?v=6.4.0"
  as="style"
  onload="this.rel='stylesheet'"
/>

<style id="_pageStyle">

.content a{color:#4f86aa;border-color:rgba(79,134,170,0.2)}.content a:hover{border-color:#4f86aa}:focus{outline-color:#4f86aa}::selection{color:#fff;background:#4f86aa}::-moz-selection{color:#fff;background:#4f86aa}

</style>


<noscript>
  <link rel="stylesheet" href="http://localhost:4000/assets/css/hydejack.css?v=6.4.0" />
    
  
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Lato"
  />
  <style>
    html { font-family: 'Lato', 'Sans-serif' }
    h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6, .heading { font-family: 'Lato', 'Sans-serif' }
  </style>
   
  <link rel="stylesheet" href="http://localhost:4000/assets/icomoon/style.css" />
</noscript>
<!--<![endif]-->

</head>

<body>
  <!-- =============== -->
<!-- MENU            -->
<!-- =============== -->
<div class="navbar fixed-top">
  <div class="content">
    <span class="sr-only">Jump to:</span>
    <a id="_menu" class="menu no-hover" href="#_title">
      <span class="sr-only">Menu</span>
    </a>
  </div>
</div>

<!-- =============== -->
<!-- CONTENT         -->
<!-- =============== -->
<div id="_yPushState">
  <div class="fade-in">
    <main id="_main" class="content" role="main" data-color="#4f86aa" data-image="/assets/img/kumo.jpg">
      

<article id="post-swift/2019/10/15/Swift-Basic-11" class="post" role="article">
  <header>
    <h1 class="post-title">
      
        Swift Hashable Protocol
        
    </h1>

    <p class="post-date heading">
      <time datetime="2019-10-15T00:00:00+09:00">15 Oct 2019</time>
      









in <a href="/category/swift/" data-flip="title">Swift</a>

      









on <a href="/tag/swift-basic/" data-flip="title">Basic</a>

    </p>

    
  <div class="hr" style="padding-bottom:0"></div>


  </header>
  


  
  <div class="markdown-body">

    <!--  -->
    <style>
      .myAd1190 {
        width: 48%;
        height: 280px;
      }

      .myAd1290 {
        width: 48%;
        height: 280px;
      }

      @media(max-width: 800px) {
        .myAd1190 {
          display: none;
        }

        .myAd1290 {
          width: 98%;
        }
      }

      .row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        height: 300px;
      }

      .row-center {
        display: flex;
        justify-content: center;
        height: 258px;
      }
    </style>
   
    <!--<br />-->
    <h1 id="hashable은-프로토콜이다">Hashable은 프로토콜이다.</h1>

<h2 id="hash">Hash?</h2>

<p>자료구조 시간에 해쉬(hash)의 개념에 대해서 배운다. 일반적으로 Hash function 이라는 알고리즘 접근을 통해 데이터 마다 고유의 숫자를 설정하여 탐색등에 효율적으로 데이터를 접근하기 위함이다.( O(1) 만에 원하는 데이터를 탐색 가능) 자세한 내용은 <a href="https://github.com/gaki2745/GAKI-CS-Study/tree/master/DataStructure">Gaki-CS-Study</a> 에 정리를 해놓았다.</p>

<p>이 hash 기능을 swift 내부에서 프로토콜로 제공을 하고 있는데 사용법과 특징에 대해서 알아보자</p>

<h2 id="swift-hashable-protocol">Swift Hashable Protocol</h2>

<p>Swift에서 딕셔너리는 <code class="highlighter-rouge">Dictionary&lt;KeyType, ValueType&gt;</code> 형태로 쓰인다. 여기서 제약사항은 반드시 <strong>KeyType은 해쉬가능한 타입이어야 한다.(Hashable)</strong> 즉, 그 자체로 유일하게 표현이 가능한 방법을 제공해야한다는 말이다.</p>

<p>스위프트의 기본 타입으로 제공되는 String, Integer, Floating-point, Boolean 등과 같은 Standard library에 속한 많은 타입들은 Hashable 프로토콜을 준수한다. 또한 enum역시 해쉬가능하므로 이에 해당한다. 게다가 Set 은 오직 Hashable 한 것만 들어가야하기 때문에 기본적으로 해시값을 제공한다.</p>

<p>또한 자신만의 사용자 정의 타입도 hash가 가능할 수 있다. Hashable 프로토콜을 준수한다면 딕셔너리의 키나 세트로 활용할 수 있다는 말이다.</p>

<p>Hashable 프로토콜을 준수하는 모든 타입의 인스턴스는 <code class="highlighter-rouge">hashValue</code> 라는 <strong>정수형 프로퍼티</strong> 를 갖고 있으며 이 값은 각각의 인스턴스를 식별하는 값이 된다. 그렇기 때문에 반드시 하나만 존재해야하는 딕셔너리의 key 값이나 중복된 값은 허용하지 않는 자료구조인 set에 들어가는 값들은 Hashable해야 한다는 것이다.</p>

<blockquote>
  <p>Hashable : 값이 중복이 되지 않고 특정 인스턴스를 식별할 수 있는 고유의 키 값을 가지는 모든 값들은 이 속성을 지켜야한다.</p>
</blockquote>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="c1">// 1.</span>
<span class="k">var</span> <span class="nv">basicDic</span> <span class="o">=</span> <span class="p">[</span><span class="kt">String</span><span class="p">:</span> <span class="kt">String</span><span class="p">]()</span>

<span class="n">basicDic</span><span class="p">[</span><span class="s">"Gaki"</span><span class="p">]</span> <span class="o">=</span> <span class="s">"iOS Developer"</span>    <span class="c1">// String, bool 모두 Hashable 을 준수하는 기본 타입</span>

<span class="kd">struct</span> <span class="kt">CustomType</span><span class="p">:</span> <span class="kt">Hashable</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">property</span><span class="p">:</span> <span class="kt">Int</span>
<span class="p">}</span>
<span class="c1">// 2.</span>
<span class="k">var</span> <span class="nv">customDic</span> <span class="o">=</span> <span class="p">[</span><span class="kt">CustomType</span><span class="p">:</span> <span class="kt">String</span><span class="p">]()</span>  <span class="c1">// 위에 CustomType 구조체 선언시 Hashable 프로토콜을 준수하게 선언했기때문에 딕셔너리 키값으로 사용할 수 있다.</span>

</code></pre>
</div>

<ol>
  <li>기본 타입인 String은 Hashable 프로토콜을 준수하기 때문에 딕셔너리의 키값으로 사용할 수 있다.</li>
  <li>사용자 지정인 <code class="highlighter-rouge">CustomType</code> 구조체는 Hashable 프로토콜을 준수하도록 선언하였기때문에 마찬가지로 딕셔너리 키값으로 사용할 수 있는 것이다.</li>
</ol>

<blockquote>
  <p>만일 같은 타입의 두 인스턴스가 동일하다면 두 인스턴스의 해시 값 역시 같다. 하지만 그 역은 성립하지 않는다. 즉, <strong>두 인스턴스의 해시 값이 같다고 두 인스턴스는 같은것이 아니다</strong></p>
</blockquote>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="kd">struct</span> <span class="kt">GridPoint</span><span class="p">:</span> <span class="kt">Hashable</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">x</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="k">var</span> <span class="nv">y</span><span class="p">:</span> <span class="kt">Int</span>
<span class="p">}</span>

<span class="k">let</span> <span class="nv">grid1</span> <span class="o">=</span> <span class="kt">GridPoint</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="mi">3</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">grid2</span> <span class="o">=</span> <span class="kt">GridPoint</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="mi">3</span><span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="n">grid1</span><span class="o">.</span><span class="n">hashValue</span> <span class="o">==</span> <span class="n">grid2</span><span class="o">.</span><span class="n">hashValue</span><span class="p">)</span>       <span class="c1">// true</span>
</code></pre>
</div>

<blockquote>
  <p><strong>중요</strong></p>

  <p>hash 값은 프로그램 실행에 따라 동일하지 않을 수도 있다. 그러므로 추후에 사용을 위해 해시 값을 저장하는 행위는 하면 안된다.</p>
</blockquote>

<h2 id="conforming-to-the-hashable-protocol">Conforming to the Hashable Protocol</h2>

<p>사용자 정의 타입을 딕셔너리의 Key나 Set에서 사용하기 위해서는 Hashable 프로토콜을 준수해야한다. Hashable 프로토콜은 <strong>Equatable</strong> 프로토콜을 상속받는다. 그렇기 떄문에 이 두 프로토콜의 요구 사항을 모두 충족시켜야 한다.</p>

<ul>
  <li>사용자 정의 타입은 선언부에 Hashable 을 작성해주어 해당 프로토콜을 준수한다 명시해야한다.</li>
  <li>구조체 : 내부의 저장 프로퍼티가 모두 Hashable 프로토콜을 준수해야한다,</li>
  <li>열거형: 연관 값의 타입이 Hashable 프로토콜을 준수해야한다.</li>
</ul>

<blockquote>
  <p>참고</p>

  <p>Swift 4.1 버전 이전에는 Hashable 프로토콜을 준수하기 위해서는 hashValue 값과 == 연산자를 다음과 같이 직접 구현해야한다.</p>
</blockquote>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="c1">// Swift 4.1 ver 이하 Hashable 작업</span>
<span class="kd">struct</span> <span class="kt">GridPoint</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">x</span><span class="p">:</span> <span class="kt">Int</span>
    <span class="k">var</span> <span class="nv">y</span><span class="p">:</span> <span class="kt">Int</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="kt">GridPoint</span><span class="p">:</span> <span class="kt">Hashable</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">hashValue</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="n">hashValue</span> <span class="o">^</span> <span class="n">y</span><span class="o">.</span><span class="n">hashValue</span> <span class="o">&amp;*</span> <span class="mi">16777619</span>
    <span class="p">}</span>

    <span class="kd">static</span> <span class="kd">func</span> <span class="o">==</span> <span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">GridPoint</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">GridPoint</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">lhs</span><span class="o">.</span><span class="n">x</span> <span class="o">==</span> <span class="n">rhs</span><span class="o">.</span><span class="n">x</span> <span class="o">&amp;&amp;</span> <span class="n">lhs</span><span class="o">.</span><span class="n">y</span> <span class="o">==</span> <span class="n">rhs</span><span class="o">.</span><span class="n">y</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>hashValue 값을 4.1 버전 이상부터는 컴파일러가 자동으로 구현하여 제공하고 있기 때문에 이를 설정 해줄 필요도 없다. 하지만 사용자가 여전히 이를 정의할 수 는 있다.</p>

<h2 id="class는-컴파일러가-제공하지-않는다">Class는 컴파일러가 제공하지 않는다!</h2>

<p>클래스의 경우 컴파일러가 자동으로 구현해주지 않기 때문에 사용자가 위의 코드 처럼 직접 구현해주어야한다</p>

<div class="language-swift highlighter-rouge"><pre class="highlight"><code><span class="kd">class</span> <span class="kt">Country</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">name</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">capital</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">var</span> <span class="nv">visited</span><span class="p">:</span> <span class="kt">Bool</span>
    
    <span class="nf">init</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="nv">capital</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="nv">visited</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">self</span><span class="o">.</span><span class="n">capital</span> <span class="o">=</span> <span class="n">capital</span>
        <span class="k">self</span><span class="o">.</span><span class="n">visited</span> <span class="o">=</span> <span class="n">visited</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="kt">Country</span><span class="p">:</span> <span class="kt">Equatable</span> <span class="p">{</span>
    <span class="kd">static</span> <span class="kd">func</span> <span class="o">==</span> <span class="p">(</span><span class="nv">lhs</span><span class="p">:</span> <span class="kt">Country</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="kt">Country</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">lhs</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">rhs</span><span class="o">.</span><span class="n">name</span> <span class="o">&amp;&amp;</span>
            <span class="n">lhs</span><span class="o">.</span><span class="n">capital</span> <span class="o">==</span> <span class="n">rhs</span><span class="o">.</span><span class="n">capital</span> <span class="o">&amp;&amp;</span>
            <span class="n">lhs</span><span class="o">.</span><span class="n">visited</span> <span class="o">==</span> <span class="n">rhs</span><span class="o">.</span><span class="n">visited</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// deprecated 되었기 때문에 hash(into:) 함수를 사용</span>
<span class="c1">//extension Country: Hashable {</span>
<span class="c1">//  var hashValue: Int {</span>
<span class="c1">//    return name.djb2hash ^ capital.hashValue ^ visited.hashValue</span>
<span class="c1">//  }</span>
<span class="c1">//}</span>

<span class="kd">extension</span> <span class="kt">Country</span><span class="p">:</span> <span class="kt">Hashable</span> <span class="p">{</span>
    <span class="kd">func</span> <span class="nf">hash</span><span class="p">(</span><span class="n">into</span> <span class="nv">hasher</span><span class="p">:</span> <span class="k">inout</span> <span class="kt">Hasher</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">hasher</span><span class="o">.</span><span class="nf">combine</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">djb2hash</span> <span class="p">)</span>
        <span class="n">hasher</span><span class="o">.</span><span class="nf">combine</span><span class="p">(</span><span class="n">capital</span><span class="o">.</span><span class="n">hashValue</span><span class="p">)</span>
        <span class="n">hasher</span><span class="o">.</span><span class="nf">combine</span><span class="p">(</span><span class="n">visited</span><span class="o">.</span><span class="n">hashValue</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="kt">String</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">djb2hash</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">unicodeScalars</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">unicodeScalars</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="nv">$0</span><span class="o">.</span><span class="n">value</span> <span class="p">}</span>
        <span class="k">return</span> <span class="n">unicodeScalars</span><span class="o">.</span><span class="nf">reduce</span><span class="p">(</span><span class="mi">5381</span><span class="p">)</span> <span class="p">{</span>
            <span class="p">(</span><span class="nv">$0</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">)</span> <span class="o">&amp;+</span> <span class="nv">$0</span> <span class="o">&amp;+</span> <span class="kt">Int</span><span class="p">(</span><span class="nv">$1</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
    
    <span class="k">var</span> <span class="nv">sdbmhash</span><span class="p">:</span> <span class="kt">Int</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">unicodeScalars</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">unicodeScalars</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="nv">$0</span><span class="o">.</span><span class="n">value</span> <span class="p">}</span>
        <span class="k">return</span> <span class="n">unicodeScalars</span><span class="o">.</span><span class="nf">reduce</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="kt">Int</span><span class="p">(</span><span class="nv">$1</span><span class="p">)</span> <span class="o">&amp;+</span> <span class="p">(</span><span class="nv">$0</span> <span class="o">&lt;&lt;</span> <span class="mi">6</span><span class="p">)</span> <span class="o">&amp;+</span> <span class="p">(</span><span class="nv">$0</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="p">)</span> <span class="o">-</span> <span class="nv">$0</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>위의 코드는 Country class에 각 프로퍼티에 hash 값을 적용 시킨 것이다. 여기서 유심히 봐야할 것은 String과 Int를 extension 해서 또 내부에서 Hash 값을 계산해서 반환하는 프로퍼티를 선언했고 또 이 Hash 값을 Country 클래스에서 사용하고 있다.</p>

<p>이전에는 hashValue 를 직접 프로퍼티로 선언해서 값을 설정해주어서 반환해주었지만 지금은 deprecated 되어서 <code class="highlighter-rouge">hash(into:)</code> 메서드를 제공하고 있어 이를 통해 hash를 계산하는 함수를 작성 해주면 된다.</p>

<h2 id="hash-algorithm-을-잘-설계하자">Hash Algorithm 을 잘 설계하자</h2>

<p>hashValue의 로직을 작성할 때는 사용자 정의 타입을 이루고 있는 데이터들에 따라 적절한 해시 알고리즘을 사용해야한다</p>

<blockquote>
  <p>해시 알고리즘이란? : 앞에서 데이터들을 특정 숫자로 표현하기 위해 HashFunction 을 설정하여 작업하는 것을 말하며 데이터 간의 해싱을 하였을때 중복(충돌)을 최소화 하는 것이 목적이고 이에 대한 다양한 알고리즘 기법이 존재한다</p>
</blockquote>

<p>만약 해시 알고리즘을 잘못 설계하여 데이터 끼리의 충돌(collision) 이나 overflow 가 발생하게 되면 해시의 가장 큰 장점인 <code class="highlighter-rouge">O(1)</code>  만에 빠른 탐색이 불가능 하게 되고 결국 배열 탐색과 동일한 작업이 되므로 성능이 떨어지게 된다.</p>

<hr />

<h2 id="reference">Reference</h2>

<ul>
  <li>
    <p><a href="https://stackoverflow.com/questions/55395207/swift-hashable-hashvalue-is-deprecated-as-a-protocol-requirement">Swift 4.1 hashValue deprecated</a></p>
  </li>
  <li><a href="https://www.hackingwithswift.com/articles/115/swift-4-2-improves-hashable-with-a-new-hasher-struct">HackingWithSwift - Hashable</a></li>
  <li><a href="https://www.hackingwithswift.com/example-code/language/how-to-conform-to-the-hashable-protocol">Swift 5 Hashable</a></li>
</ul>


    <br />
    <br />
  </div>
  

</article>

<!--<hr class="dingbat" />-->
<!--
<div class="share">
  <h2>Share this post</h2>
  <div class="share-body">
    <a href="http://twitter.com/share?text=Swift Hashable Protocol&amp;url=http://localhost:4000/swift/2019/10/15/Swift-Basic-11/"
      onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
      <span class="icon-twitter">
      </span>
    </a>
    <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/swift/2019/10/15/Swift-Basic-11/"
      onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
      <span class="icon-facebook">
      </span>
    </a>
  </div>
</div>
-->
<br />






  <aside class="author" role="complementary">
    <div class="author">
  <h2 class="page-title hr">
    About
  </h2>
<div class="author-body">
  
    
  

  

  <img
    src="/assets/img/me.jpg"
    class="me"
    alt="youngjun gu"
    srcset="/assets/img/me.jpg 1x,/assets/img/me.jpg 2x"
    
  />


  
  <div class="author-body-description">
    <p>오늘을 기록하고 내일을 코딩하는 개발자</p>

  </div>
</div>
</div>

  </aside>




<aside class="related" role="complementary">
  <h2 class="hr">Related Posts</h2>

  <ul class="related-posts">
    
      
      
      
        
        
          


<li class="h4">
  <a href="/swift/2020/10/10/Swift-OOP-DIP/" data-flip="title">
    <span>Swift OOP) DIP - 의존관계역전원칙(Dependency Inversion Principle)</span>
  </a>
  <small><time datetime="2020-10-10T00:00:00+09:00">
    10 Oct 2020
  </time></small>
</li>

        
      
        
        
          


<li class="h4">
  <a href="/swift/2020/07/20/Swift-OOP-ISP/" data-flip="title">
    <span>Swift OOP) ISP - 인터페이스 분리원칙(Interface Segregation Principle)</span>
  </a>
  <small><time datetime="2020-07-20T00:00:00+09:00">
    20 Jul 2020
  </time></small>
</li>

        
      
        
        
          


<li class="h4">
  <a href="/swift/2020/07/19/Swift-OOP-LSP/" data-flip="title">
    <span>Swift OOP) LSP - 리스코프 치환원칙(Liskov Substitution Principle)</span>
  </a>
  <small><time datetime="2020-07-19T00:00:00+09:00">
    19 Jul 2020
  </time></small>
</li>

        
      
        
        
      
    
  </ul>
</aside>


      
        <aside class="comments" role="complementary">
  <h2>Comments</h2>
  <hr/>

  <div id="disqus_thread"></div>

  <script>
    !function(s,i){function e(e){var t=s.pageYOffset||i.body.scrollTop;s.DISQUS&&!s._disqusThis&&!s._disqusFirst&&t+s.innerHeight>=s._disqusThreadOffsetTop&&(s._disqusThis=!0,s.DISQUS.reset({reload:!0,config:d}))}var d=function(){this.page.title="Swift Hashable Protocol",this.page.identifier="/swift/2019/10/15/Swift-Basic-11",this.page.url="http://localhost:4000/swift/2019/10/15/Swift-Basic-11/"};s._disqusFirst=void 0===s._disqusFirst||s._disqusFirst,s._disqusLoading=void 0!==s._disqusLoading&&s._disqusLoading,s._disqusThis=!1,s._disqusThreadOffsetTop=i.getElementById("disqus_thread").offsetTop,s._disqusLoading?s._disqusFirst=!1:(s._disqusLoading=!0,loadJSDeferred("//gaki.disqus.com/embed.js"),s.addEventListener?s.addEventListener("scroll",e,{passive:!0}):s.attachEvent?s.attachEvent("onscroll",e):s.onscroll=e)}(window,document);

  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</aside>

      

      <footer>
  <hr/>
  
    <p>© 2020. by Gaki</p>

  
  <p>
    <code>Powered by <a href="https://gaki2745.github.io/">gaki</a></code>
  </p>
</footer>

    </main>
    <div class="right-side">
  <br />
  <br />
</div>

  </div>
  <div id="_yDrawer">
  <div id="_sidebar" class="sidebar">
    <div class="sidebar-bg" style="background-color:#4f86aa;background-image:url(/assets/img/kumo.jpg)"></div>
    <header class="sidebar-sticky" role="banner">
      <br/>
      <div class="sidebar-about">
        <h1><a id="_title" href="/">Gaki</a></h1>
        <p>오늘을 기록하고 내일을 코딩하는 iOS 개발자</p>

      </div>

      <br/>
      <br/>
      <nav class="sidebar-nav heading" role="navigation">
        <span class="sr-only">Navigation:</span>
<ul>
  

  

  
  
  
  
  
    <li>
      <input type="checkbox" id="list-item-1"/>
      <div  class="list-wrapper">
      <a class="sidebar-nav-item" href="/category/ios/">iOS</a>
       <label class="folder" for="list-item-1">▾</label>
    </div>
     <ul class="list-body">
       
           
         
           
         
           
         
           
         
           
         
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/ios-basic/">Basic</a>
             </li>
           
         
           
         
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/ios-%EB%94%94%EC%9E%90%EC%9D%B8%ED%8C%A8%ED%84%B4/">디자인패턴</a>
             </li>
           
         
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/ios-%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90%ED%8C%A8%ED%84%B4/">아키텍쳐패턴</a>
             </li>
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/ios-%ED%85%8C%EC%8A%A4%ED%8C%85/">테스팅</a>
             </li>
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/ios-ui%EB%94%94%EC%9E%90%EC%9D%B8/">UI디자인</a>
             </li>
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/ios-arkit/">ARKit</a>
             </li>
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/ios-avfoundation/">AVFoundation</a>
             </li>
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/ios-pop/">POP</a>
             </li>
           
         
     </ul>
    </li>

  
  
    <li>
      <input type="checkbox" id="list-item-2"/>
      <div  class="list-wrapper">
      <a class="sidebar-nav-item" href="/category/swift/">Swift</a>
       <label class="folder" for="list-item-2">▾</label>
    </div>
     <ul class="list-body">
       
           
         
           
         
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/swift-basic/">Basic</a>
             </li>
           
         
           
         
           
         
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/swift-rxswift/">RxSwift</a>
             </li>
           
         
           
         
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/swift-oop/">OOP</a>
             </li>
           
         
           
         
           
         
           
         
           
         
           
         
           
         
     </ul>
    </li>

  
  
    <li>
      <input type="checkbox" id="list-item-3"/>
      <div  class="list-wrapper">
      <a class="sidebar-nav-item" href="/category/algorithm/">Algorithm</a>
       <label class="folder" for="list-item-3">▾</label>
    </div>
     <ul class="list-body">
       
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/algorithm-problem/">문제풀이</a>
             </li>
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/algorithm-swiftalgorithm/">SwiftAlgorithm</a>
             </li>
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
     </ul>
    </li>

  
  
    <li>
      <input type="checkbox" id="list-item-4"/>
      <div  class="list-wrapper">
      <a class="sidebar-nav-item" href="/category/swiftui/">SwiftUI</a>
       <label class="folder" for="list-item-4">▾</label>
    </div>
     <ul class="list-body">
       
           
         
           
         
           
         
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/swiftui-combine/">Combine</a>
             </li>
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
     </ul>
    </li>

  
  
    <li>
      <input type="checkbox" id="list-item-5"/>
      <div  class="list-wrapper">
      <a class="sidebar-nav-item" href="/category/wwdc/">WWDC</a>
       <label class="folder" for="list-item-5">▾</label>
    </div>
     <ul class="list-body">
       
           
         
           
         
           
         
           
         
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/wwdc-2019/">2019</a>
             </li>
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
     </ul>
    </li>

  
  
    <li>
      <input type="checkbox" id="list-item-6"/>
      <div  class="list-wrapper">
      <a class="sidebar-nav-item" href="/category/life/">Life</a>
       <label class="folder" for="list-item-6">▾</label>
    </div>
     <ul class="list-body">
       
           
         
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/life-review/">후기</a>
             </li>
           
         
           
         
           
         
           
         
           
         
           
         
           
             <li>
               <a class="sidebar-nav-subitem" href="/tag/life-retrospect/">회고</a>
             </li>
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
     </ul>
    </li>

  
  
    <li>
      <input type="checkbox" id="list-item-7"/>
      <div  class="list-wrapper">
      <a class="sidebar-nav-item" href="/about/">About</a>
       
    </div>
     <ul class="list-body">
       
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
           
         
     </ul>
    </li>

  
</ul>

      </nav>
    <br/>
    <br/>
      <div class="sidebar-box">
        
          
  

  

  <img
    src="/assets/img/me.jpg"
    class="me"
    alt="youngjun gu"
    srcset="/assets/img/me.jpg 1x,/assets/img/me.jpg 2x"
    
  />


        
      </div>
      <p>Be Faithful to the Basic!!</p>

      
      
        <div class="sidebar-social">
          <span class="sr-only">Social:</span>
<ul>
  
    









<li>
  <a href="https://facebook.com/yeongjun.gu">
    <span class="icon-facebook" title="Facebook"></span>
    <span class="sr-only">Facebook</span>
  </a>
</li>

  
    









<li>
  <a href="https://github.com/gaki2745">
    <span class="icon-github" title="GitHub"></span>
    <span class="sr-only">GitHub</span>
  </a>
</li>

  
    









<li>
  <a href="mailto:guyeongjun@naver.com">
    <span class="icon-mail" title="Email"></span>
    <span class="sr-only">Email</span>
  </a>
</li>

  
    









<li>
  <a href="https://gaki2745.github.io/feed.xml">
    <span class="icon-rss2" title="RSS"></span>
    <span class="sr-only">RSS</span>
  </a>
</li>

  
</ul>

        </div>
      
    </header>
  </div>
</div>
</div>

<!-- =============== -->
<!-- SCRIPTS         -->
<!-- =============== -->

<script>
  window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
  ga('create', 'UA-92346434-1', 'auto');
  ga('send', 'pageview');
  loadJSDeferred('https://www.google-analytics.com/analytics.js');
</script>





<!--[if gt IE 8]><!---->
<script src="//ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>
<script>
  WebFont.load({
    
    google: {
      families: 'Lato'.split('|')
    },
    

    custom: {
      families: ['icomoon'],
      urls: ['/assets/icomoon/style.css']
    }
  });
</script>
<!--<![endif]-->


  <!--[if gt IE 9]><!---->
  
  <script>loadJSDeferred('/assets/js/hydejack.js?v=6.4.0');</script>

  
  <!--<![endif]-->



</body>

</html>
